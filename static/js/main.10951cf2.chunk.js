(this.webpackJsonpqdraw=this.webpackJsonpqdraw||[]).push([[0],{16:function(e,t,n){e.exports=n(43)},21:function(e,t,n){},23:function(e,t,n){},24:function(e,t,n){},25:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(15),o=n.n(c),u=(n(21),n(2)),s=n.n(u),i=n(4),l=n(3);n(23);var f=function(e){var t=e.canvasRef,n=e.contextRef,c=e.setCurB64,o=Object(a.useState)(!1),u=Object(l.a)(o,2),s=u[0],i=u[1];Object(a.useEffect)((function(){var e=t.current;e.width=350,e.height=350,e.style.width="".concat(350,"px"),e.style.height="".concat(350,"px");var a=e.getContext("2d");a.lineCap="round",a.strokeStyle="rgb(1,1,1)",a.lineWidth=5,n.current=a}),[t,n]);var f=function(e){var t=e.nativeEvent;t.preventDefault();var a=t.offsetX,r=t.offsetY;n.current.beginPath(),n.current.moveTo(a,r),i(!0)},v=function(e){e.nativeEvent.preventDefault(),n.current.closePath(),i(!1),c(t.current.toDataURL("image/jpeg"))},p=function(e){var t=e.nativeEvent;if(t.preventDefault(),s){var a=t.offsetX,r=t.offsetY;if(void 0===a){var c=t.target.getBoundingClientRect(),o=t.targetTouches[0].pageX-c.left,u=t.targetTouches[0].pageY-c.top;return n.current.lineTo(o,u),void n.current.stroke()}n.current.lineTo(a,r),n.current.stroke()}};return r.a.createElement("div",{className:"CanvasContainer"},r.a.createElement("canvas",{className:"canvas",onMouseDown:f,onMouseUp:v,onMouseMove:p,onTouchStart:f,onTouchEnd:v,onTouchMove:p,ref:t}))};n(24);var v=function(e){var t=e.contextRef;return r.a.createElement("div",{className:"ButtonsContainer"},r.a.createElement("button",{onClick:function(){},className:"button white"},"skip"),"\xa0  \xa0",r.a.createElement("button",{onClick:function(){t.current.clearRect(0,0,window.innerWidth,window.innerHeight)},className:"button red"},"Clear"))};n(25);var p=function(e){var t=e.doodle,n=e.time,a=e.timeFieldRef;return r.a.createElement("div",{className:"InfoWeb"},r.a.createElement("div",{className:"InfoWebHead"},"Please draw ",r.a.createElement("b",null,t)," ",r.a.createElement("br",null),"in ",r.a.createElement("b",null,r.a.createElement("span",{ref:a,className:"letter-changer"},n))," seconds"))};function d(e){return h.apply(this,arguments)}function h(){return(h=Object(i.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"speechSynthesis"in window&&(console.log("speakig:",t),n=new SpeechSynthesisUtterance(t.replace(/(<([^>]+)>)/gi,"")),speechSynthesis.speak(n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var m=n(5),b=n.n(m),g="http://127.0.0.1:";function w(){return(w=Object(i.a)(s.a.mark((function e(t,n){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,b.a.get(g+"8008/wakeup");case 4:a=e.sent,console.log("w",a.data),"up"===a.data.status&&n(!0);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var E=function(){var e=Object(i.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,b.a.post(g+"8008/predict",{b64Image:t});case 4:return n=e.sent,e.abrupt("return",n.data.preds);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(e,t,n,a,r){if(void 0!==e){console.log(e);for(var c=0;c<e.length;c++){var o=Object(l.a)(e[c],2),u=o[0];o[1];if(d("I see "+u),t===u){null!==r.current&&clearInterval(r.current),clearInterval(r.current);var s=10;return r.current=setInterval((function(){s--,a.current.textContent=s,s<=0&&clearInterval(r.current)}),1e3),!0}}return!1}};var O=function(){var e=Object(a.useRef)(null),t=Object(a.useRef)(null),n=Object(a.useRef)(null),c=Object(a.useRef)(null),o=Object(a.useState)(!1),u=Object(l.a)(o,2),d=u[0],h=u[1],m=Object(a.useState)(null),b=Object(l.a)(m,2),g=b[0],O=b[1],k=Object(a.useState)("animal migration"),x=Object(l.a)(k,2),y=x[0],R=(x[1],Object(a.useState)("10")),S=Object(l.a)(R,2),C=S[0];return S[1],Object(a.useEffect)((function(){!function(e,t){w.apply(this,arguments)}(d,h),function(){var e=Object(i.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return speechSynthesis.cancel(),e.next=3,E(g);case 3:t=e.sent,j(t,y,0,n,c);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[d,g,y,C,n,c]),!0!==d?r.a.createElement("div",{className:"BigInfo"},"Waking up server \xa0\ud83d\ude34 \xa0",r.a.createElement("span",{className:"letter-changer"},"ZzZ")):r.a.createElement("div",null,r.a.createElement(f,{canvasRef:e,contextRef:t,setCurB64:O}),r.a.createElement(v,{contextRef:t}),r.a.createElement(p,{doodle:y,time:C,timeFieldRef:n}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(O,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[16,1,2]]]);
//# sourceMappingURL=main.10951cf2.chunk.js.map